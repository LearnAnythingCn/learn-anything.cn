{
    "componentChunkName": "component---src-templates-article-article-detail-gen-js",
    "path": "/react-state",
    "result": {"data":{"strapiArticles":{"id":"Articles_102","title":"React的state用法详解！","description":"state是什么？怎么使用？有那几个特性？用state封装的clock组件！","content":"##### 一、state是什么？\n\nstate 是 class组件的内置对象，用于class组件内部数据更新，譬如可以封装一个Clock组件，每秒更新一次时间。\n\n---\n\n##### 二、怎么使用？\n\n###### 1、使用state封装的Clock组件\n\n新建index.html文件，复制下面代码到index.html文件中，保存后用浏览器打开，就可以看到效果。\n\n```js\n<!DOCTYPE html>\n<html>\n\n<head>\n    <meta charset=\"UTF-8\" />\n    <title>Hello World</title>\n    <!-- 第一步：加载开发版本的React -->\n    <script src=\"https://unpkg.com/react@17/umd/react.development.js\"></script>\n    <script src=\"https://unpkg.com/react-dom@17/umd/react-dom.development.js\"></script>\n\n    <!-- 部署时，请用下面链接替代上面 -->\n    <!-- <script src=\"https://unpkg.com/react@16/umd/react.production.min.js\" crossorigin></script>\n    <script src=\"https://unpkg.com/react-dom@16/umd/react-dom.production.min.js\" crossorigin></script> -->\n\n    <!-- 第二步：加载开发版本的babel -->\n    <script src=\"https://unpkg.com/@babel/standalone/babel.min.js\"></script>\n\n</head>\n<body>\n    <div id=\"root\"></div>\n    <script type=\"text/babel\">\n\n        class Clock extends React.Component {\n            constructor(props) {\n                super(props);\n              \t// 1、初始化 state\n                this.state = { date: new Date() };\n            }\n\n            // 组件被渲染到 DOM 中后运行：组件挂载\n            componentDidMount() {\n                this.timerID = setInterval(\n                    () => this.tick(),\n                    1000\n                );\n            }\n\n            // 组件卸载\n            componentWillUnmount() {\n                clearInterval(this.timerID);\n            }\n\n            tick() {\n              \t// 2、更新 state 数据\n                this.setState({\n                    date: new Date()\n                });\n            }\n\n          \t// 3、获取state的值并显示\n            render() {\n                return (\n                    <div>\n                        <h1>Hello, world!</h1>\n                        <h2>It is {this.state.date.toLocaleTimeString()}.</h2>\n                    </div>\n                );\n            }\n        }\n\n        ReactDOM.render(\n            <Clock />,\n            document.getElementById('root')\n        );\n    </script>\n</body>\n</html>\n```\n\n###### 2、state三个特性\n\n```js\n// 1.错误：只能调用 setState 方法修改 state 对象\nthis.state.comment = 'Hello';\n\n// 2.正确 ：只能调用 setState 方法修改 state 对象\nthis.setState({ comment: 'Hello' });\n\n// 3.正确：只能在构造函数中，初始化 this.state\n```\n\n---\n\n##### 三、参考链接：\n\n- [State - 官方说明](https://zh-hans.reactjs.org/docs/state-and-lifecycle.html)\n\n\n\n\n","url":"https://learn-anything.cn/react-state","published_at":"2021-10-08T05:04:11.000Z","tags":[{"name":"React","slug":"react"}]},"site":{"siteMetadata":{"title":"收集优质资源","author":"@learn-anything.cn","description":"追求极简语言，说明事物因果！","email":"lh@learn-anything.cn"}}},"pageContext":{"title":"React的state用法详解！","slug":"react-state"}},
    "staticQueryHashes": ["63159454"]}