{
    "componentChunkName": "component---src-templates-article-article-detail-gen-js",
    "path": "/gatsby-mdx",
    "result": {"data":{"strapiArticles":{"id":"Articles_341","title":"Gatsby中使用MDX！","description":"mdx是什么？gatsby项目中怎么获取mdx文件内容并形成页面？","content":"##### 一、MDX 是啥？\n\nMDX 是一种文档格式，可以在 Markdown 文档中无缝地插入 JSX 代码。\n\n```jsx\nimport {Chart} from './snowfall.js'\nexport const year = 2018\n\n# Last year’s snowfall\n\nIn {year}, the snowfall was above average.\nIt was followed by a warm spring which caused\nflood conditions in many of the nearby rivers.\n\n<Chart year={year} color=\"#fcb32c\" />\n```\n\n- [mdx - 中文 - 官方文档](https://www.mdxjs.cn/)\n\n- [mdx - 英文 - 官方文档](https://mdxjs.com/)\n- [mdx - 源码 - GitHub](https://github.com/mdx-js/mdx/)\n\n---\n\n##### 二、Gatsby 中使用 MDX\n\n###### 1、安装插件\n\n把 markdown 文件，转为gatsby 数据层节点。\n\n```shell\n# 安装插件及其依赖库\nnpm install gatsby-source-filesystem gatsby-plugin-mdx @mdx-js/mdx @mdx-js/react\n# 或\nyarn add gatsby-source-filesystem gatsby-plugin-mdx @mdx-js/mdx @mdx-js/react\n```\n\n- [gatsby-source-filesystem](https://www.gatsbyjs.com/plugins/gatsby-source-filesystem/)  ：把文件转换为  gatsby 的数据层节点：allFile、File。\n\n- [gatsby-plugin-mdx](https://www.gatsbyjs.com/plugins/gatsby-plugin-mdx)  ：转换 allFile 节点中格式为 `.mdx`、`.md`  的文件，生成新的 gatsby 数据层节点：allMdx、mdx。\n  - 默认只处理 `.mdx` 文件，可以通过extensions 来增加文件格式。\n  - 依赖 gatsby-source-filesystem ，所以两个插件需要同时安装和设置。\n\n\n---\n\n###### 2、修改配置\n\ngatsby-config.js 增加下面内容：\n\n```js\n// gatsby-config.js\nmodule.exports = {\n  plugins: [\n    {\n      resolve: `gatsby-source-filesystem`,\n      options: {\n        name: `posts`,\n        path: `${__dirname}/src/mdx/`,\n      },\n    },\n    {\n      resolve: `gatsby-plugin-mdx`,\n      options: {\n        extensions: [`.mdx`, `.md`]\n      },\n    },\n  ],\n}\n```\n\n---\n\n###### 3、增加数据源文件\n\ngatsby 项目中，新增目录 `src/mdx` 和 文件 `src/mdx/about.mdx`\n\n```md\n// src/mdx/about.mdx\n\nThis is my first blog post! Isn't it *great*?\nSome of my **favorite** things are:\n* Petting dogs\n* Singing\n* Eating potato-based foods\n```\n\n---\n\n###### 4、展示页面\n\ngatsby 项目中，新增页面  `src/pages/about.js`\n\n```js\nimport * as React from \"react\"\nimport { graphql } from \"gatsby\"\nimport { MDXRenderer } from \"gatsby-plugin-mdx\"\n\nconst AboutPageMdx = ({ data }) => {\n    return (\n        <MDXRenderer>{data.allMdx.nodes[0].body}</MDXRenderer>\n    )\n}\n\nexport default AboutPageMdx\n\nexport const pageQueryMDX = graphql`\n  query MDXQuery {\n    allMdx {\n        nodes {\n          body\n        }\n      }\n  }\n `\n```\n\n---\n\n###### 5、访问\n\n重启 gatsby 项目，浏览器访问页面：http://localhost:8000/about/\n\n---\n\n##### 三、参考文档\n\n- [gatsby-plugin-mdx - 官方文档](https://www.gatsbyjs.com/plugins/gatsby-plugin-mdx/?=gatsby-plugin-mdx)","url":"https://learn-anything.cn/gatsby-mdx","published_at":"2021-11-06T14:51:17.000Z","tags":[{"name":"Gatsby","slug":"gatsby"}]},"site":{"siteMetadata":{"title":"收集优质资源","author":"@learn-anything.cn","description":"追求极简语言，说明事物因果！","email":"lh@learn-anything.cn"}}},"pageContext":{"title":"Gatsby中使用MDX！","slug":"gatsby-mdx"}},
    "staticQueryHashes": ["63159454"]}