{
    "componentChunkName": "component---src-templates-article-article-detail-gen-js",
    "path": "/http-gzip",
    "result": {"data":{"strapiArticles":{"id":"Articles_417","title":"如何用gzip进行前端性能优化？","description":"HTTP 可以对传输的内容进行压缩，减少网络实际传输数据的大小。原理就是 服务器对文件进行 gzip 压缩后，再进行传输，浏览器收到资源后再解压的过程。","content":"##### 一、简介\n\nHTTP 可以对传输的内容进行压缩，减少网络实际传输数据的大小。原理就是 服务器对文件进行 gzip 压缩后，再进行传输，浏览器收到资源后再解压的过程。\n\n- 对于 js、text、json、css 这种纯文本进行压缩，效果特别好，不用改变代码即可提升网站响应速度；\n- 压缩过程是需要花费 CPU 资源的，对大文件(图片、音乐等)进行压缩，不仅不能提升网站响应速度，还会增加服务器压力，让网站有明显的卡顿感。\n\n---\n\n##### 二、nginx 开启 gzip\n\n服务器使用 nginx，浏览器使用 chrome，开启 gzip，看看实际优化的效果。\n\n###### 1、修改配置 \n\n打开 nginx  的配置文件  `sudo nano /etc/nginx/nginx.conf `，找到 gzip 对应区域，增加下面配置后，保存退出。\n\n```\n# 开启gzip，关闭用off\ngzip on;\n\n# 是否在http header中添加Vary: Accept-Encoding，建议开启\ngzip_vary on;\n\n# gzip 压缩级别，1-9，数字越大压缩的越好，也越占用CPU时间，推荐6\ngzip_comp_level 6;\n\n# 设置压缩所需要的缓冲区大小 \ngzip_buffers 16 8k;\n\n# 设置gzip压缩针对的HTTP协议版本\ngzip_http_version 1.1;\n\n# 选择压缩的文件类型，其值可以在 mime.types 文件中找到。\ngzip_types text/plain text/css application/json application/javascript\n\n\n# 启用gzip压缩的最小文件，小于设置值的文件将不会压缩\ngzip_min_length 1k;\n\n# gzip_proxied any;\n```\n\n---\n\n###### 2、重启 nginx\n\n```\n# 1、重启：\nsudo /etc/init.d/nginx restart\n\n# 2、重新加载配置文件，无需重启：\nsudo /etc/init.d/nginx reload\n```\n\n---\n\n###### 3、查看 gzip 是否开启？\n\n1. 打开网站；\n2. 打开开发者工具（windows快捷键`Control+Shift+J`、Mac快捷键`Command+Option+J`）；\n3. 如下图，响应头中有 `Content-Encoding: gzip`  ，表示已经开启。\n\n![查看是否开启gzip](https://learn-anything.cn/查看是否开启gzip.png)\n\n---\n\n###### 4、查看 gzip 压缩效果？\n\n1. 打开网站；\n2. 打开开发者工具（windows快捷键`Control+Shift+J`、Mac快捷键`Command+Option+J`）；\n3. 如下图，73.9kb表示是压缩后在网络传输的大小；574kb表示是实际文件的大小。\n\n![查看文件实际大小和网络传输大小](https://learn-anything.cn/查看文件实际大小和网络传输大小.png)\n\n---\n\n##### 三、前端性能检测工具\n\nlighthouse 是谷歌的开源项目，一键即可查找出网站所有需要优化的内容和建议。[安装和使用，可以看这里！](https://learn-anything.cn/lighthouse)\n\n![lighthouse-report](https://learn-anything.cn/lighthouse-report.png)\n\n---\n\n##### 四、参考文档\n\n- [MIME_types - MDN](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/MIME_types)\n\n- [uses-text-compression](https://web.dev/uses-text-compression/)\n\n- [devtools - request-rows](https://developer.chrome.com/docs/devtools/network/reference/#request-rows)\n- [lighthouse - google](https://developers.google.com/web/tools/lighthouse?hl=zh-cn)\n\n\n","url":"https://learn-anything.cn/http-gzip","author":null,"published_at":"2021-11-27T04:38:14.000Z","tags":[{"name":"性能优化","slug":"performance-optimization"},{"name":"Nginx","slug":"nginx"}]},"site":{"siteMetadata":{"title":"收集优质资源","author":"@learn-anything.cn","description":"追求极简语言，说明事物因果！","email":"lh@learn-anything.cn"}}},"pageContext":{"title":"如何用gzip进行前端性能优化？","slug":"http-gzip"}},
    "staticQueryHashes": ["63159454"]}