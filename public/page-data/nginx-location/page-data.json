{
    "componentChunkName": "component---src-templates-article-article-detail-gen-js",
    "path": "/nginx-location",
    "result": {"data":{"strapiArticles":{"id":"Articles_427","title":"怎么配置Nginx中的location模块？","description":"Nginx配置中的location模块，怎么用？","content":"##### 一、Nginx 是怎么响应请求？\n\nNginx 响应 `http://learn-anything.cn/nginx-start`  这个URL的过程：\n\n1. `learn-anything.cn`  ：用 `server_name`  和  `listen`  两个属性来匹配；\n2. `nginx-start`  ：用 `location`  属性来匹配；\n\n---\n\n##### 二、location\n\nNginx 配置包含4个模块，location 是其中之一，用于网站路由配置。\n\n###### 1、语法\n\n```\nlocation [ = | ~ | ~* | ^~ ] uri { ... }\nlocation @name { ... }\n```\n\n- `=`  ：表示完全相等，后面的 uri 用路径字符串；\n- `~`  ：表示大小写敏感，后面的 uri 用正则表示；\n- `~*`  ：表示不区分大小写，后面的 uri 用正则表示；\n- `^~`  ：如果最长匹配前缀有 `^~` ，则不检查正则表达式，后面的 uri  用路径字符串；\n\n- `@`  ：只用于重定向，不能嵌套。\n\n---\n\n###### 2、匹配实例\n\n```\nlocation = / {\n    [ configuration A ]\n}\n\nlocation / {\n    [ configuration B ]\n}\n\nlocation /documents/ {\n    [ configuration C ]\n}\n\nlocation ^~ /images/ {\n    [ configuration D ]\n}\n\nlocation ~* \\.(gif|jpg|jpeg)$ {\n    [ configuration E ]\n}\n```\n\n- `/`  ：匹配 configuration A；\n\n- `/index.html`  ：匹配 configuration B；\n\n- `/documents/document.html`  ：匹配 configuration C；\n\n- `/images/1.gif`  ：匹配 configuration D；\n\n- `/documents/1.jpg`  ：匹配 configuration E。\n\n---\n\n###### 3、匹配优先级\n\n- 先匹配  `=`  成功就返回，停止其他类型匹配；\n\n- 再匹配  `^~` 成功就返回，停止其他类型匹配；\n\n- 再进行  `~` 和 `~\\*`  的正则匹配，如果有多个匹配，按照配置文件中的先后顺序优先匹配；\n- 以上都没有成功，就寻找没有任何前缀的匹配，也无法匹配成功就返回 error_page。\n\n---\n\n###### 4、`/` 结尾的不同\n\n以  `/`  结尾，表示访问文件夹下的 index.html；没有 `/` 结尾，表示访问的是文件。\n\n```\n# 1、重定向到 http://user.example.com\nlocation /doc/ {\n    proxy_pass http://user.example.com;\n}\n\n# 2、访问 doc 文件夹下的index.html\nlocation /doc/ { \n}\n\n# 3、先访问 doc 文件，不存在就301重定向到 /doc/\nlocation /doc {\n}\n\n# 4、只访问 doc 文件，不存在就 error_page\nlocation = /doc {   \n}\n```\n\n---\n\n###### 5、`@`  的用法\n\n如下，只是用于重定向。\n\n```\nlocation / {\n    try_files /system/maintenance.html\n              $uri $uri/index.html $uri.html\n              @mongrel;\n}\n\nlocation @mongrel {\n    proxy_pass http://mongrel;\n}\n```\n\n---\n\n##### 三、参考文档\n\n- [location  -  nginx  -  官方文档](http://nginx.org/en/docs/http/ngx_http_core_module.html#location)\n\n\n\n\n\n\n","url":"https://learn-anything.cn/nginx-location","author":null,"published_at":"2021-12-03T11:09:31.000Z","tags":[{"name":"Nginx","slug":"nginx"}]},"site":{"siteMetadata":{"title":"收集优质资源","author":"@learn-anything.cn","description":"追求极简语言，说明事物因果！","email":"lh@learn-anything.cn"}}},"pageContext":{"title":"怎么配置Nginx中的location模块？","slug":"nginx-location"}},
    "staticQueryHashes": ["63159454"]}