{
    "componentChunkName": "component---src-templates-article-article-detail-gen-js",
    "path": "/pm2-multi-node-js",
    "result": {"data":{"strapiArticles":{"id":"Articles_162","title":"PM2用配置文件管理多个Node.js项目！","description":"有多个  Node.js  进程需要一起管理时，各自需要的参数也不同时，创建一个配置文件来管理是最好的方案。","content":"##### 一、问题简介\n\n有多个  Node.js  进程需要一起管理时，各自需要的参数也不同时，创建一个配置文件来管理是最好的方案。\n\n---\n\n##### 二、解决方案\n\n###### 1、生成基础版本配置文件\n\n- `pm2 init simple`  ：可以生成基础版本的配置文件：ecosystem.config.js\n\n  ```js\n  // ecosystem.config.js\n  module.exports = {\n      apps: [{\n          name: \"app1\",\n          script: \"./app.js\"\n      }]\n  }\n  ```\n\n###### 2、生成复杂版本的配置文件\n\n- `pm2 init 等同于  pm2 ecosystem` ，可以生成带有 deploy 属性的配置文件：ecosystem.config.js\n\n  ```js\n  module.exports = {\n      apps: [{\n          script: 'index.js',\n          watch: '.'\n      }, {\n          script: './service-worker/',\n          watch: ['./service-worker']\n      }],\n  \n      deploy: {\n          production: {\n              user: 'SSH_USERNAME',\n              host: 'SSH_HOSTMACHINE',\n              ref: 'origin/master',\n              repo: 'GIT_REPOSITORY',\n              path: 'DESTINATION_PATH',\n              'pre-deploy-local': '',\n              'post-deploy': 'npm install && pm2 reload ecosystem.config.js --env production',\n              'pre-setup': ''\n          }\n      }\n  };\n  ```\n\n- 此版本配置适合远程配置服务器使用，[实例查看这里！](https://learn-anything.cn/pm2-nodejs-deploy)\n\n---\n\n###### 3、使用配置文件\n\n- 启动、停止、重启、重载、删除配置文件中所有项目\n\n  ```shell\n  pm2 start ecosystem.config.js\n  pm2 stop ecosystem.config.js\n  pm2 restart ecosystem.config.js\n  pm2 reload ecosystem.config.js\n  pm2 delete ecosystem.config.js\n  ```\n\n- 启动指定应用\n\n  ```shell\n  pm2 start   ecosystem.config.js --only api-app\n  pm2 start \tecosystem.config.js --only \"api-app,worker-app\"\n  ```\n\n---\n\n##### 三、参考文档\n\n- [application-declaration - 官方文档](https://pm2.keymetrics.io/docs/usage/application-declaration/)\n\n\n","url":"https://learn-anything.cn/pm2-multi-node-js","published_at":"2021-10-26T12:28:55.000Z","tags":[{"name":"PM2","slug":"pm2"}]},"site":{"siteMetadata":{"title":"收集优质资源","author":"@learn-anything.cn","description":"追求极简语言，说明事物因果！","email":"lh@learn-anything.cn"}}},"pageContext":{"title":"PM2用配置文件管理多个Node.js项目！","slug":"pm2-multi-node-js"}},
    "staticQueryHashes": ["63159454"]}