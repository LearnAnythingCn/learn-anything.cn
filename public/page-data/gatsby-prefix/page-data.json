{
    "componentChunkName": "component---src-templates-article-article-detail-gen-js",
    "path": "/gatsby-prefix",
    "result": {"data":{"strapiArticles":{"id":"Articles_369","title":"怎样给网站根目录增加前缀？","description":"当只能用  `http://www.example.com/blog`  这个域名，而不能用  `http://www.example.com`  来发布网站时，Gatsby 项目中应该怎么设置?","content":"\n\n##### 一、解决什么问题？\n\n当只能用  `http://www.example.com/blog`  这个域名，而不能用  `http://www.example.com`  来发布网站时，Gatsby 项目中应该怎么设置?\n\n---\n\n##### 二、解决方案\n\n##### 1、静态网站\n\n通过 gatsby build 生成的静态网站，按照下面步骤设置即可。\n\n- 修改  `gatsby-config.js`\n\n  ```js\n  module.exports = {\n    pathPrefix: `/blog`,\n  }\n  ```\n\n- prefix-paths 或 PREFIX_PATHS\n\n  增加标志 或 环境变量进行编译，Gatsby 会给所有页面路由、文件、图像等都增加 `blog`  路由前缀，让网站页面能正常访问。\n\n  ```shell\n  # 1、使用标志\n  gatsby build --prefix-paths\n  \n  # 2、使用环境变量\n  PREFIX_PATHS=true gatsby build\n  ```\n\n- 这样发布网站，所有页面都会在  `http://www.example.com/blog` 下正常运行。\n\n---\n\n##### 2、`gatsby server`  \n\ngatsby server 运行动态生成网站，只需在运行是增加 `--prefix-paths`  标志即可。\n\n```\ngatsby serve --prefix-paths\n```\n\n---\n\n##### 三、页面跳转的问题\n\n如果采用这种前缀方式运行网站，那么在项目内部进行页面跳转时，也必须增加 `blog`  前缀。好在，Gatsby 已经为此提供了解决方案：使用 `<Link>组件`  或 `navigate函数`  来代替传统的 `<a>标签` 和 `window.open 函数`  来实现页面跳转。\n\n```js\n// <Link> 组件 使用方式\nimport React from \"react\"\nimport { Link } from \"gatsby\"\nimport Layout from \"../components/layout\"\n\nfunction Index() {\n  return (\n    <Layout>\n      <Link to=\"page-2\">Page 2</Link>\n    </Layout>\n  )\n}\n```\n\n```js\n// navigate 函数 使用方式\nimport React from \"react\"\nimport { navigate } from \"gatsby\"\nimport Layout from \"../components/layout\"\n\nexport default function Index() {\n  return (\n    <Layout>\n      {/* Note: this is an intentionally contrived example, but you get the idea! */}\n      <button onClick={() => navigate(\"/page-2\")}>\n        Go to page 2, dynamically\n      </button>\n    </Layout>\n  )\n}\n```\n\n---\n\n##### 四、参考文档\n\n- [path-prefix](https://www.gatsbyjs.com/docs/how-to/previews-deploys-hosting/path-prefix)\n- [Demo - using-path-prefix](https://github.com/gatsbyjs/gatsby/tree/master/examples/using-path-prefix)\n\n\n","url":"https://learn-anything.cn/gatsby-prefix","published_at":"2021-11-15T04:28:06.000Z","tags":[{"name":"Gatsby","slug":"gatsby"}]},"site":{"siteMetadata":{"title":"收集优质资源","author":"@learn-anything.cn","description":"追求极简语言，说明事物因果！","email":"lh@learn-anything.cn"}}},"pageContext":{"title":"怎样给网站根目录增加前缀？","slug":"gatsby-prefix"}},
    "staticQueryHashes": ["63159454"]}